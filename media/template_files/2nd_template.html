<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{{ resume.title }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <style>
    :root {
      --accent: #0d6efd;
      --ink: #212529;
      --muted: #6c757d;
      --paper: #ffffff;
      --sidebar: #f8f9fa;
    }
    body { background: var(--paper); color: var(--ink); }
    .wrap { max-width: 1000px; margin: 40px auto; }
    .cardy { border: 1px solid #e9ecef; border-radius: 18px; overflow: hidden; box-shadow: 0 2px 10px rgba(0,0,0,.04); }
    .sidebar { background: var(--sidebar); min-height: 100%; padding: 28px 22px; border-right: 1px solid #e9ecef; }
    .name { font-size: 1.75rem; font-weight: 700; line-height: 1.1; }
    .title-muted { color: var(--muted); }
    .tag { display:inline-block; background: rgba(13,110,253,.08); color: var(--accent); border: 1px solid rgba(13,110,253,.2); padding: 3px 10px; border-radius: 999px; font-size: .8rem; margin: 0 6px 6px 0; }
    .section { padding: 26px 28px; }
    .section + .section { border-top: 1px solid #f1f3f5; }
    .section h3 { font-size: 1.05rem; letter-spacing: .02em; text-transform: uppercase; color: var(--muted); margin-bottom: 14px; }
    .item-head { display:flex; justify-content: space-between; gap: 8px; flex-wrap: wrap; }
    .role { font-weight: 600; }
    .org { color: var(--muted); }
    .when, .where { color: var(--muted); font-size: .95rem; }
    .dot { margin: 0 6px; color: #ced4da; }
    .bullets { margin: .4rem 0 0 0; }
    .bullets p { margin: 0 0 .4rem 0; }
    @media print {
      .wrap { margin: 0; max-width: none; }
      .cardy { box-shadow: none; border: none; }
      a[href]:after { content: ""; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="cardy row g-0">
      <!-- Sidebar -->
      <aside class="sidebar col-12 col-md-4">
        <div class="mb-3">
          {% if resume.personal_details %}
            <div class="name">
              {{ resume.personal_details.first_name }} {{ resume.personal_details.last_name }}
            </div>
          {% else %}
            <div class="name">Your Name</div>
          {% endif %}
          <div class="title-muted">{{ resume.title }}</div>
        </div>

        <!-- Quick tags (auto from organisations and projects names) -->
        <div class="mb-3">
          {% for org in resume.organisations.all %}
            <span class="tag">{{ org.position }}</span>
          {% endfor %}
          {% for project in resume.projects.all %}
            <span class="tag">{{ project.name }}</span>
          {% endfor %}
          {% if resume.organisations.all|length == 0 and resume.projects.all|length == 0 %}
            <span class="tag">Detail-oriented</span>
            <span class="tag">Team Player</span>
          {% endif %}
        </div>

        <!-- Education quick list -->
        <div>
          <h3>Education</h3>
          <div class="small">
            {% for edu in resume.educations.all %}
              <div class="mb-2">
                <div class="fw-semibold">{{ edu.degree }}</div>
                <div class="text-muted">{{ edu.school }}</div>
                <div class="text-muted">
                  {{ edu.start_date|date:"MMM yyyy" }} – {{ edu.end_date|default:"Present"|date:"MMM yyyy" }}
                </div>
                {% if edu.location %}<div class="text-muted">{{ edu.location }}</div>{% endif %}
              </div>
            {% empty %}
              <div class="text-muted">Add your education.</div>
            {% endfor %}
          </div>
        </div>
      </aside>

      <!-- Main content -->
      <main class="col-12 col-md-8">
        <!-- Experience -->
        <section class="section">
          <h3>Experience</h3>
          {% for org in resume.organisations.all %}
            <div class="mb-3">
              <div class="item-head">
                <div>
                  <div class="role">{{ org.position }}</div>
                  <div class="org">{{ org.name }}</div>
                </div>
                <div class="text-end">
                  <div class="when">
                    {{ org.start_date|date:"MMM yyyy" }} – {{ org.end_date|default:"Present"|date:"MMM yyyy" }}
                  </div>
                  {% if org.location %}
                    <div class="where">{{ org.location }}</div>
                  {% endif %}
                </div>
              </div>
              {% if org.description %}
                <div class="bullets">
                  <p>{{ org.description }}</p>
                </div>
              {% endif %}
            </div>
          {% empty %}
            <div class="text-muted">Add your work experience.</div>
          {% endfor %}
        </section>

        <!-- Projects -->
        <section class="section">
          <h3>Projects</h3>
          {% for project in resume.projects.all %}
            <div class="mb-3">
              <div class="item-head">
                <div class="role">{{ project.name }}</div>
                <div class="when">
                  {{ project.start_date|date:"MMM yyyy" }} – {{ project.end_date|default:"Present"|date:"MMM yyyy" }}
                </div>
              </div>
              {% if project.description %}
                <div class="bullets">
                  <p>{{ project.description }}</p>
                </div>
              {% endif %}
            </div>
          {% empty %}
            <div class="text-muted">Add your projects.</div>
          {% endfor %}
        </section>
      </main>
    </div>
  </div>
</body>
</html>
